(this.webpackJsonpcapstone2=this.webpackJsonpcapstone2||[]).push([[0],{161:function(e,t,n){},163:function(e,t,n){},169:function(e,t,n){},187:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},201:function(e,t){},203:function(e,t){},217:function(e,t){},219:function(e,t){},247:function(e,t){},249:function(e,t){},250:function(e,t){},255:function(e,t){},257:function(e,t){},276:function(e,t){},288:function(e,t){},291:function(e,t){},308:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(27),s=n.n(c),o=n(12),i=(n(161),n(5)),l=n.n(i),u=n(11),j=n(10);var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,r=Object(a.useState)(n),c=Object(j.a)(r,2),s=c[0],o=c[1];return Object(a.useEffect)((function(){console.debug("hooks useLocalStorage useEffect","item=",s),null===s?localStorage.removeItem(e):localStorage.setItem(e,s)}),[e,s]),[s,o]},d=r.a.createContext(),h=(n(163),n(0));var m=function(e){var t=e.logout,n=Object(a.useContext)(d).currentUser;return console.debug("Navigation","currentUser=",n),Object(h.jsxs)("nav",{className:"Navigation navbar navbar-expand-md",children:[Object(h.jsx)(o.b,{className:"navbar-brand",to:"/",children:"BookStak"}),n?Object(h.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item mr-4",children:Object(h.jsx)(o.c,{className:"nav-link",to:"/booksearch",children:"Search"})}),Object(h.jsx)("li",{className:"nav-item mr-4",children:Object(h.jsx)(o.c,{className:"nav-link",to:"/bookshelf",children:"BookShelf"})}),Object(h.jsx)("li",{className:"nav-item mr-4",children:Object(h.jsx)(o.c,{className:"nav-link",to:"/profile",children:"Profile"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsxs)(o.b,{className:"nav-link",to:"/",onClick:t,children:["Log out ",n.first_name||n.username]})})]}):Object(h.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item mr-4",children:Object(h.jsx)(o.c,{className:"nav-link",to:"/login",children:"Login"})}),Object(h.jsx)("li",{className:"nav-item mr-4",children:Object(h.jsx)(o.c,{className:"nav-link",to:"/signup",children:"Sign Up"})})]})]})},p=n(15);n(169);var f=function(){var e=Object(a.useContext)(d).currentUser;return console.debug("Homepage","currentUser=",e),Object(h.jsx)("div",{className:"Homepage",children:Object(h.jsxs)("div",{className:"container text-center",children:[Object(h.jsx)("h1",{className:"mb-4 font-weight-bold",children:"BookStak"}),Object(h.jsx)("p",{className:"lead",children:"Books: A Uniquely Portable Magic"}),e?Object(h.jsxs)("h2",{children:["Welcome Back, ",e.firstName||e.username,"!"]}):Object(h.jsxs)("p",{children:[Object(h.jsx)(o.b,{className:"btn btn-secondary font-weight-bold mr-3",to:"/login",children:"Log in"}),Object(h.jsx)(o.b,{className:"btn btn-secondary font-weight-bold",to:"/signup",children:"Sign up"})]})]})})},O=n(315),x=n(316),v=n(321),g=n(314),k=n(317),N=n(318),y=n(319),w=n(43),C=n(53),S=n.n(C),B=n(14),U=n(310),L=n(311),A=n(312),I=n(313),P=n(320),D=(n(187),function(e){var t=e.thumbnail,n=e.title,r=e.pageCount,c=e.language,s=e.description,o=e.authors,i=e.publisher,l=e.previewLink,u=e.infoLink,b=Object(a.useState)(!1),d=Object(j.a)(b,2),m=d[0],f=d[1],O=function(){return f(!m)},x=Object(p.g)();return Object(h.jsxs)(U.a,{style:{width:"233px"},className:"m-auto ",children:[Object(h.jsx)(L.a,{top:!0,style:{width:"100%",height:"233px"},src:t,alt:n}),Object(h.jsxs)(A.a,{children:[Object(h.jsx)(I.a,{className:"card-title",children:n}),Object(h.jsx)(g.a,{onClick:O,children:"More info"})]}),Object(h.jsxs)(P.a,{isOpen:m,toggle:O,children:[Object(h.jsxs)("div",{className:"modal-header d-flex justify-content-center",children:[Object(h.jsx)("h5",{className:"modal-title text-center",id:"exampleModalLabel",children:n}),Object(h.jsx)("button",{"aria-label":"Close",className:"close",type:"button",onClick:O,children:Object(h.jsx)("span",{"aria-hidden":!0,children:"X"})})]}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsxs)("div",{className:"d-flex justify-content-between ml-3",children:[Object(h.jsx)("img",{src:t,alt:n,style:{height:"233px"}}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{children:["Page Count: ",r||"Page Count Unknown"]}),Object(h.jsxs)("p",{children:["Language : ",c||"Language Unknown"," "]}),Object(h.jsxs)("p",{children:["Authors : ",o?o.join(", "):"Authors Unknown"]}),Object(h.jsxs)("p",{children:["Publisher : ",i||"Publisher Unknown"]})]})]}),Object(h.jsx)("div",{className:"mt-3",children:s||"Description Unknown"})]}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("div",{className:"left-silde",children:Object(h.jsx)("a",{href:l,className:"btn-link",color:"default",type:"button",target:"_blank",rel:"noopener noreferrer",children:"Preview"})}),Object(h.jsx)("div",{className:"divider"}),Object(h.jsx)("div",{className:"right-silde",children:Object(h.jsx)("a",{href:u,className:"btn-link",color:"default",type:"button",target:"_blank",rel:"noopener noreferrer",children:"Info"})}),Object(h.jsx)("div",{className:"divider"}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"btn btn-secondary float-right",onClick:function(e){var a={title:n,authors:o,description:s,thumbnail:t};x.push({pathname:"/addsearchbook",state:Object(B.a)({},a)})},children:"Add to Shelf"})})]})]})]})});n(57);var E=function(){var e=Object(a.useState)(3),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(j.a)(c,2),o=s[0],i=s[1],b=Object(a.useState)(!1),d=Object(j.a)(b,2),m=d[0],p=d[1],f=Object(a.useState)([]),C=Object(j.a)(f,2),B=C[0],U=C[1],L=Object(a.useState)(!1),A=Object(j.a)(L,2),I=A[0],P=A[1],E=function(){p(!0),n>40||n<1?P(!0):function(){q.apply(this,arguments)}()};function q(){return(q=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(o,"&maxResults=").concat(n,"&startIndex=1"));case 2:(t=e.sent).data.items.length>0&&(U(t.data.items),p(!1));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){13===e.which&&E()};return Object(h.jsxs)("div",{className:"w-100 h-100",children:[Object(h.jsxs)("div",{className:"main-image d-flex justify-content-center align-items-center flex-column",children:[Object(h.jsx)("div",{className:"filter"}),Object(h.jsx)("h2",{className:"display-2 text-center text-white mb-3",style:{zIndex:2},children:"Search Books"}),Object(h.jsxs)("div",{style:{width:"60%",zIndex:2},children:[Object(h.jsxs)(O.a,{size:"lg",className:"mb-3",children:[Object(h.jsx)(x.a,{placeholder:"Book Search",value:o,onChange:function(e){return i(e.target.value)},onKeyPress:F}),Object(h.jsx)(v.a,{addonType:"append",children:Object(h.jsx)(g.a,{type:"submit",color:"secondary",onSubmit:E,onClick:E,children:Object(h.jsx)("i",{className:"fas fa-search"})})})]}),Object(h.jsx)("div",{className:"d-flex text-white justify-content-center",children:Object(h.jsxs)(k.a,{children:[Object(h.jsx)(N.a,{for:"maxResults",children:"Max Results"}),Object(h.jsx)(x.a,{type:"number",id:"maxResults",placeholder:"Max Results",value:n,onChange:function(e){return r(e.target.value)}})]})})]})]}),I?Object(h.jsx)(w.a,{type:"danger",messages:["Results must be between 1 and 40"]}):null,function(){if(m)return Object(h.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(h.jsx)(y.a,{style:{width:"3rem",height:"3rem"}})});var e=B.map((function(e,t){var n="";return e.volumeInfo.imageLinks&&(n=e.volumeInfo.imageLinks.thumbnail),Object(h.jsx)("div",{className:"col-lg-4 mb-3",children:Object(h.jsx)(D,{thumbnail:n,title:e.volumeInfo.title,pageCount:e.volumeInfo.pageCount,language:e.volumeInfo.language,authors:e.volumeInfo.authors,publisher:e.volumeInfo.publisher,description:e.volumeInfo.description,previewLink:e.volumeInfo.previewLink,infoLink:e.volumeInfo.infoLink})},e.id)}));return Object(h.jsxs)("div",{className:"container my-5",children:[Object(h.jsx)("div",{className:"row",children:e}),Object(h.jsx)("div",{className:"row justify-content-center text-center",children:Object(h.jsxs)("p",{className:"addbook",children:["Cant find what you're looking for? Add book not found in search ",Object(h.jsx)("a",{href:"/addbook",children:"here"})]})})]})}()]})};n(195);var q=function(e){var t=e.searchFor;console.debug("SearchForm","searchFor=",typeof t);var n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],s=r[1];return Object(h.jsx)("div",{className:"SearchForm mb-4",children:Object(h.jsxs)("form",{className:"form-inline",onSubmit:function(e){e.preventDefault(),t(c.trim()||void 0),s(c.trim())},children:[Object(h.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"searchTerm",placeholder:"Enter book category to filter your library",value:c,onChange:function(e){s(e.target.value)}}),Object(h.jsx)("button",{type:"submit",className:"btn btn-lg btn-secondary",children:"Filter"})]})})},F=n(154),R=n(155),M="https://bookstak.herokuapp.com",T=function(){function e(){Object(F.a)(this,e)}return Object(R.a)(e,null,[{key:"request",value:function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,c,s,o,i,u=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},r=u.length>2&&void 0!==u[2]?u[2]:"get",console.debug("API Call:",n,a,r),c="".concat(M,"/").concat(n),s={Authorization:"Bearer ".concat(e.token)},o="get"===r?a:{},t.prev=6,t.next=9,S()({url:c,method:r,data:a,params:o,headers:s});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.response),i=t.t0.response.data.error.message,Array.isArray(i)?i:[i];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBooks",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books",{username:t});case 2:return n=e.sent,e.abrupt("return",n.books);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBook",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.book);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFilteredBooks",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.books);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveProfile",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),n,"patch");case 2:return a=e.sent,e.abrupt("return",a.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveBook",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books",t,"post");case 2:return n=e.sent,e.abrupt("return",n.book);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveBookEdit",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books/".concat(n),t,"patch");case 2:return a=e.sent,e.abrupt("return",a.book);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteBook",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("books/".concat(t.id),t,"delete");case 2:return n=e.sent,e.abrupt("return",n.book);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),z=function(e){var t=e.thumbnail,n=e.title,r=e.description,c=e.authors,s=e.personalreview,o=e.category,i=e.id,b=Object(a.useState)(!1),m=Object(j.a)(b,2),f=m[0],O=m[1],x=function(){return O(!f)},v=Object(a.useContext)(d).currentUser,k=Object(p.g)(),N=function(){return window.location.reload()};function y(){return(y=Object(u.a)(l.a.mark((function e(a){var u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),u={id:"".concat(i),title:"".concat(n),authors:"".concat(c),description:"".concat(r),personalreview:"".concat(s),category:"".concat(o),thumbnail:"".concat(t),username:v.username},e.prev=2,e.next=5,T.deleteBook(u);case 5:x(),N(),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),console.log("unable to delete book"),console.log(u),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function w(){return(w=Object(u.a)(l.a.mark((function e(a){var u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u={id:i,title:n,authors:c,description:r,personalreview:s,category:o,thumbnail:t},k.push({pathname:"/editbook",state:Object(B.a)({},u)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsxs)(U.a,{style:{width:"233px"},className:"m-auto ",children:[Object(h.jsx)(L.a,{top:!0,style:{width:"100%",height:"233px"},src:t,alt:n}),Object(h.jsxs)(A.a,{children:[Object(h.jsx)(I.a,{className:"card-title",children:n}),Object(h.jsx)(g.a,{onClick:x,children:"More info"})]}),Object(h.jsxs)(P.a,{isOpen:f,toggle:x,children:[Object(h.jsxs)("div",{className:"modal-header d-flex justify-content-center",children:[Object(h.jsx)("h5",{className:"modal-title text-center",id:"exampleModalLabel",children:n}),Object(h.jsx)("button",{"aria-label":"Close",className:"close",type:"button",onClick:x,children:Object(h.jsx)("span",{"aria-hidden":!0,children:"X"})})]}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsxs)("div",{className:"d-flex justify-content-between ml-3",children:[Object(h.jsx)("img",{src:t,alt:n,style:{height:"233px"}}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{children:["Authors : ",c?c.replace(/,/g,", "):"Authors Unknown"]}),Object(h.jsxs)("p",{children:["Category : ",o||"To Be Categorized"]})]})]}),Object(h.jsx)("div",{className:"mt-3",children:Object(h.jsxs)("p",{children:["Publisher's Description: ",r||"No Description"]})}),Object(h.jsx)("div",{className:"mt-3",children:Object(h.jsxs)("p",{children:["Persional Review: ",s||"None"]})})]}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("div",{className:"divider"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{className:"btn btn-secondary float-right",onClick:function(e){return w.apply(this,arguments)},children:"Edit"}),Object(h.jsx)("button",{className:"btn btn-secondary float-right",onClick:function(e){return y.apply(this,arguments)},children:"Delete"})]})]})]})]})};n(196);var H=function(){return Object(h.jsx)("div",{className:"LoadingSpinner",children:"Loading ..."})};var W=function(){console.debug("BookShelf");var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1];function c(){return(c=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getBooks(t);case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFilteredBooks(t);case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){console.debug("BookShelf useEffect getBooksOnMount"),function(e){c.apply(this,arguments)}()}),[]),n?Object(h.jsxs)("div",{className:"BookShelf col-md-8 offset-md-2",children:[Object(h.jsx)(q,{searchFor:function(e){return s.apply(this,arguments)}}),n.length?Object(h.jsx)("div",{className:"container my-5",children:Object(h.jsx)("div",{className:"row",children:n.map((function(e){return Object(h.jsx)("div",{className:"col-lg-4 mb-3",children:Object(h.jsx)(z,{id:e.id,title:e.title,authors:e.authors,description:e.description,personalreview:e.personalreview,category:e.category,thumbnail:e.thumbnail})},e.id)}))})}):Object(h.jsx)("p",{className:"lead",children:"Sorry, no results were found. Visit the search page to find some books for your shelf!"})]}):Object(h.jsx)(H,{})},_=n(19);var G=function(e){var t=e.type,n=void 0===t?"danger":t,a=e.messages,r=void 0===a?[]:a;return console.debug("Alert","type=",n,"messages=",r),Object(h.jsx)("div",{className:"alert alert-".concat(n),role:"alert",children:r.map((function(e){return Object(h.jsx)("p",{className:"mb-0 small",children:e},e)}))})};var J=function(){var e=Object(p.g)(),t=Object(p.h)(),n=Object(a.useContext)(d).currentUser,r=t.state,c=r.title,s=r.authors,o=r.description,i=r.thumbnail,b=Object(a.useState)({title:"".concat(c),authors:"".concat(s),description:"".concat(o),personalreview:"",category:"",thumbnail:"".concat(i)}),m=Object(j.a)(b,2),f=m[0],O=m[1],x=Object(a.useState)([]),v=Object(j.a)(x,2),g=v[0],k=v[1];function N(){return(N=Object(u.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r={title:f.title,authors:f.authors,description:f.description,personalreview:f.personalreview,category:f.category,thumbnail:f.thumbnail,username:n.username},t.prev=2,t.next=5,T.saveBook(r);case 5:e.push("/bookshelf"),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(2),k(t.t0),t.abrupt("return");case 12:O((function(e){return{title:"",authors:"",description:"",personalreview:"",categroy:"",thumbnail:""}})),k([]);case 14:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}function y(e){var t=e.target,n=t.name,a=t.value;O((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(_.a)({},n,a))})),k([])}return Object(h.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(h.jsx)("h3",{children:"Book"}),Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Title"}),Object(h.jsx)("input",{name:"title",className:"form-control",value:f.title,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Authors"}),Object(h.jsx)("input",{name:"authors",className:"form-control",value:f.authors,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)("input",{name:"description",className:"form-control",value:f.description,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Personal Review"}),Object(h.jsx)("input",{name:"personalreview",className:"form-control",value:f.personalreview,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Category"}),Object(h.jsx)("input",{name:"category",className:"form-control",placeholder:"Categorize this book",value:f.category,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Cover"}),Object(h.jsx)("input",{name:"thumbnail",className:"form-control",value:f.thumbnail,onChange:y})]}),g.length?Object(h.jsx)(G,{type:"danger",messages:g}):null,Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(e){return N.apply(this,arguments)},children:"Add Book"}),Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){e.push("/booksearch")},children:"Cancel"})]})})})]})};var V=function(){var e="https://images.unsplash.com/photo-1575709527142-a93ed587bb83?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=700&q=80",t=Object(a.useContext)(d).currentUser,n=Object(a.useState)({title:"",authors:"",description:"",personalreview:"",categroy:"",thumnnail:""}),r=Object(j.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)([]),i=Object(j.a)(o,2),b=i[0],m=i[1],f=Object(p.g)();function O(){return(O=Object(u.a)(l.a.mark((function n(a){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r={title:c.title,authors:c.authors,description:c.description,personalreview:c.personalreview,category:c.category,thumbnail:c.thumbnail?c.thumnnail:e,username:t.username},n.prev=2,n.next=5,T.saveBook(r);case 5:f.push("/booksearch"),n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(2),m(n.t0),n.abrupt("return");case 12:s((function(e){return{title:"",authors:"",description:"",personalreview:"",categroy:"",thumnnail:""}})),m([]);case 14:case"end":return n.stop()}}),n,null,[[2,8]])})))).apply(this,arguments)}function x(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(_.a)({},n,a))})),m([])}return console.debug("formData=",c,"formErrors=",b),Object(h.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(h.jsx)("h3",{children:"Book"}),Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Title"}),Object(h.jsx)("input",{name:"title",className:"form-control",value:c.title,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Authors"}),Object(h.jsx)("input",{name:"authors",className:"form-control",value:c.authors,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)("input",{name:"description",className:"form-control",value:c.description,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Personal Review"}),Object(h.jsx)("input",{name:"personalreview",className:"form-control",value:c.personalreview,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Category"}),Object(h.jsx)("input",{name:"category",className:"form-control",value:c.category,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Cover"}),Object(h.jsx)("input",{name:"thumbnail",className:"form-control",value:c.thumbnail,onChange:x}),Object(h.jsx)("p",{children:'To get a photo URL, right click on a picture and select "copy image address"'})]}),b.length?Object(h.jsx)(G,{type:"danger",messages:b}):null,Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(e){return O.apply(this,arguments)},children:"Add Book"}),Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){f.push("/books")},children:"Cancel"})]})})})]})};var X=function(){var e=Object(a.useContext)(d).currentUser,t=Object(p.g)(),n=Object(p.h)().state,r=n.title,c=n.authors,s=n.description,o=n.thumbnail,i=n.personalreview,b=n.category,m=n.id,f=Object(a.useState)({title:"".concat(r),authors:"".concat(c),description:"".concat(s),personalreview:"".concat(i),category:"".concat(b),thumbnail:"".concat(o)}),O=Object(j.a)(f,2),x=O[0],v=O[1],g=Object(a.useState)([]),k=Object(j.a)(g,2),N=k[0],y=k[1];function w(){return(w=Object(u.a)(l.a.mark((function n(a){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r={title:x.title,authors:x.authors,description:x.description,personalreview:x.personalreview,category:x.category,thumbnail:x.thumbnail,username:e.username},n.prev=2,n.next=5,T.saveBookEdit(r,m);case 5:t.push("/books"),n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(2),y(n.t0),n.abrupt("return");case 13:v((function(e){return{title:"",authors:"",description:"",personalreview:"",categroy:"",thumnnail:""}})),y([]);case 15:case"end":return n.stop()}}),n,null,[[2,8]])})))).apply(this,arguments)}function C(e){var t=e.target,n=t.name,a=t.value;v((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(_.a)({},n,a))})),y([])}return console.debug("formData=",x,"formErrors=",N),Object(h.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(h.jsx)("h3",{children:"Book"}),Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Title"}),Object(h.jsx)("input",{name:"title",className:"form-control",value:x.title,onChange:C})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Authors"}),Object(h.jsx)("input",{name:"authors",className:"form-control",value:x.authors,onChange:C})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)("input",{name:"description",className:"form-control",value:x.description,onChange:C})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Personal Review"}),Object(h.jsx)("input",{name:"personalreview",className:"form-control",value:x.personalreview,onChange:C})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Category"}),Object(h.jsx)("input",{name:"category",className:"form-control",value:x.category,onChange:C})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Cover"}),Object(h.jsx)("input",{name:"thumbnail",className:"form-control",value:x.thumbnail,onChange:C})]}),N.length?Object(h.jsx)(G,{type:"danger",messages:N}):null,Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(e){return w.apply(this,arguments)},children:"Edit Book"}),Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){t.push("/bookshelf")},children:"Cancel"})]})})})]})};var K=function(e){var t=e.login,n=Object(p.g)(),r=Object(a.useState)({username:"",password:""}),c=Object(j.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)([]),b=Object(j.a)(i,2),d=b[0],m=b[1];function f(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t(s);case 3:(r=e.sent).success?n.push("/bookshelf"):m(r.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(_.a)({},n,a))}))}return console.debug("LoginForm","login=",typeof t,"formData=",s,"formErrors",d),Object(h.jsx)("div",{className:"LoginForm",children:Object(h.jsxs)("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4",children:[Object(h.jsx)("h3",{className:"mb-3",children:"Log In"}),Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{onSubmit:f,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("input",{name:"username",className:"form-control",value:s.username,onChange:x,autoComplete:"username",required:!0})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",name:"password",className:"form-control",value:s.password,onChange:x,autoComplete:"current-password",required:!0})]}),d.length?Object(h.jsx)(G,{type:"danger",messages:d}):null,Object(h.jsx)("button",{className:"btn btn-secondary float-right",onSubmit:f,children:"Submit"})]})})})]})})};n(197);var Y=function(){var e=Object(p.g)(),t=Object(a.useContext)(d),n=t.currentUser,r=t.setCurrentUser,c=Object(a.useState)({firstname:n.firstname,lastname:n.lastname,email:n.email,username:n.username,password:""}),s=Object(j.a)(c,2),o=s[0],i=s[1],b=Object(a.useState)([]),m=Object(j.a)(b,2),f=m[0],O=m[1],x=Object(a.useState)(!1),v=Object(j.a)(x,2),g=v[0],k=v[1];function N(){return(N=Object(u.a)(l.a.mark((function t(n){var a,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={firstname:o.firstname,lastname:o.lastname,email:o.email,password:o.password},c=o.username,t.prev=3,t.next=6,T.saveProfile(c,a);case 6:s=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),O(t.t0),t.abrupt("return");case 13:i((function(e){return Object(B.a)(Object(B.a)({},e),{},{password:""})})),O([]),k(!0),r(s),e.push("/books");case 18:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function y(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(_.a)({},n,a))})),O([])}return console.debug("ProfileForm","currentUser=",n,"formData=",o,"formErrors=",f,"saveConfirmed=",g),Object(h.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(h.jsx)("h3",{children:"Profile"}),Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("p",{className:"form-control-plaintext",children:o.username})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"First Name"}),Object(h.jsx)("input",{name:"firstname",className:"form-control",value:o.firstname,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Last Name"}),Object(h.jsx)("input",{name:"lastname",className:"form-control",value:o.lastname,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email"}),Object(h.jsx)("input",{name:"email",className:"form-control",value:o.email,onChange:y})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Confirm password to make changes:"}),Object(h.jsx)("input",{type:"password",name:"password",className:"form-control",value:o.password,onChange:y})]}),f.length?Object(h.jsx)(w.a,{type:"danger",messages:f}):null,g?Object(h.jsx)(w.a,{type:"success",messages:["Updated successfully."]}):null,Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(e){return N.apply(this,arguments)},children:"Save Changes"}),Object(h.jsx)("button",{className:"btn btn-secondary btn-block mt-4",onClick:function(){e.push("/bookshelf")},children:"Cancel"})]})})})]})};var $=function(e){var t=e.signup,n=Object(p.g)(),r=Object(a.useState)({username:"",password:"",firstname:"",lastname:"",email:""}),c=Object(j.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)([]),b=Object(j.a)(i,2),d=b[0],m=b[1];function f(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t(s);case 3:(r=e.sent).success?n.push("/bookshelf"):m(r.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(_.a)({},n,a))}))}return console.debug("SignupForm","signup=",typeof t,"formData=",s,"formErrors=",d),Object(h.jsx)("div",{className:"SignupForm",children:Object(h.jsxs)("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4",children:[Object(h.jsx)("h2",{className:"mb-3",children:"Sign Up"}),Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{onSubmit:f,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("input",{name:"username",className:"form-control",value:s.username,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",name:"password",className:"form-control",value:s.password,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"First Name"}),Object(h.jsx)("input",{name:"firstname",className:"form-control",value:s.firstname,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Last Name"}),Object(h.jsx)("input",{name:"lastname",className:"form-control",value:s.lastname,onChange:x})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email"}),Object(h.jsx)("input",{type:"email",name:"email",className:"form-control",value:s.email,onChange:x})]}),d.length?Object(h.jsx)(G,{type:"danger",messages:d}):null,Object(h.jsx)("button",{type:"submit",className:"btn btn-primary float-right",onSubmit:f,children:"Submit"})]})})})]})})};var Q=function(e){var t=e.exact,n=e.path,r=e.children,c=Object(a.useContext)(d).currentUser;return console.debug("PrivateRoute","exact=",t,"path=",n,"currentUser=",c),c?Object(h.jsx)(p.b,{exact:t,path:n,children:r}):Object(h.jsx)(p.a,{to:"/login"})};var Z=function(e){var t=e.login,n=e.signup;return console.debug("Routes","login=".concat(typeof t),"register=".concat(typeof register)),Object(h.jsx)("div",{className:"pt-5",children:Object(h.jsxs)(p.d,{children:[Object(h.jsx)(p.b,{exact:!0,path:"/",children:Object(h.jsx)(f,{})}),Object(h.jsx)(p.b,{exact:!0,path:"/login",children:Object(h.jsx)(K,{login:t})}),Object(h.jsx)(p.b,{exact:!0,path:"/signup",children:Object(h.jsx)($,{signup:n})}),Object(h.jsx)(Q,{exact:!0,path:"/booksearch",children:Object(h.jsx)(E,{})}),Object(h.jsx)(Q,{exact:!0,path:"/bookshelf",children:Object(h.jsx)(W,{})}),Object(h.jsx)(Q,{exact:!0,path:"/addbook",children:Object(h.jsx)(V,{})}),Object(h.jsx)(Q,{exact:!0,path:"/addsearchbook",children:Object(h.jsx)(J,{})}),Object(h.jsx)(Q,{exact:!0,path:"/editbook",children:Object(h.jsx)(X,{})}),Object(h.jsx)(Q,{path:"/profile",children:Object(h.jsx)(Y,{})}),Object(h.jsx)(p.a,{to:"/"})]})})},ee=n(156),te=n.n(ee);var ne=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],p=s[1],f=b("bookworm-token"),O=Object(j.a)(f,2),x=O[0],v=O[1];function g(){return(g=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.signup(t);case 3:return n=e.sent,v(n),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("signup failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function k(){return(k=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.login(t);case 3:return n=e.sent,v(n),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("login failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return console.debug("App","infoLoaded=",n,"currentUser=",i,"token=",x),Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=14;break}return e.prev=1,t=te.a.decode(x),n=t.username,T.token=x,e.next=6,T.getCurrentUser(n);case 6:a=e.sent,p(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("App loadUserInfo: problem loading",e.t0),p(null);case 14:r(!0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}console.debug("App useEffect loadUserInfo","token=",x),r(!1),function(){e.apply(this,arguments)}()}),[x]),n?Object(h.jsx)(o.a,{children:Object(h.jsx)(d.Provider,{value:{currentUser:i,setCurrentUser:p},children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(m,{logout:function(){p(null),v(null)}}),Object(h.jsx)(Z,{login:function(e){return k.apply(this,arguments)},signup:function(e){return g.apply(this,arguments)}})]})})}):Object(h.jsx)(H,{})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(h.jsx)(o.a,{children:Object(h.jsx)(ne,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,n){}},[[308,1,2]]]);
//# sourceMappingURL=main.f7d5e37b.chunk.js.map