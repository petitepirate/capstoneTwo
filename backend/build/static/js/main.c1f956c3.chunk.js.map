{"version":3,"sources":["hooks/useLocalStorage.js","auth/UserContext.js","routes-nav/Navigation.js","homepage/Homepage.js","books/SearchBookCard.js","books/GoogleBooksSearch.js","common/SearchForm.js","api/api.js","books/BookShelfCard.js","common/LoadingSpinner.js","books/BookShelf.js","common/Alert.js","books/AddSearchedBook.js","books/AddUnavailableBook.js","books/EditBookForm.js","auth/LoginForm.js","profiles/ProfileForm.js","auth/SignupForm.js","routes-nav/PrivateRoute.js","routes-nav/Routes.js","App.js","serviceWorker.js","index.js"],"names":["useLocalStorage","key","firstValue","initialValue","localStorage","getItem","useState","item","setItem","useEffect","console","debug","removeItem","UserContext","React","createContext","Navigation","logout","currentUser","useContext","className","to","onClick","first_name","username","Homepage","firstName","SearchBookCard","thumbnail","title","pageCount","language","description","authors","publisher","previewLink","infoLink","modal","setModal","toggle","history","useHistory","Card","style","width","CardImg","top","height","src","alt","CardBody","CardTitle","Button","Modal","isOpen","id","aria-label","type","aria-hidden","join","href","color","target","rel","e","book","push","pathname","state","GoogleBookSearch","maxResults","setMaxResults","query","setQuery","loading","setLoading","cards","setCards","error","setError","handleSubmit","getBooks","a","axios","get","res","data","items","length","onKeyPress","which","zIndex","InputGroup","size","Input","placeholder","value","onChange","InputGroupAddon","addonType","onSubmit","FormGroup","Label","for","Alert","messages","Spinner","map","i","volumeInfo","imageLinks","handleCards","SearchForm","searchFor","searchTerm","setSearchTerm","evt","preventDefault","trim","undefined","name","BASE_URL","process","REACT_APP_BASE_URL","BookWormApi","endpoint","method","url","headers","Authorization","token","params","response","message","Array","isArray","this","request","user","books","category","UserBookCard","personalreview","bookData","deleteBook","log","replace","LoadingSpinner","BookShelf","setBooks","getFilteredBooks","search","b","BookShelfCard","role","AddSearchedBook","location","useLocation","formData","setFormData","formErrors","setFormErrors","saveBook","f","categroy","handleChange","AddUnavailableBook","defaultThumbnail","thumnnail","EditBookForm","saveBookEdit","LoginForm","login","password","result","success","errors","l","autoComplete","required","Profile","setCurrentUser","firstname","lastname","email","saveConfirmed","setSaveConfirmed","profileData","saveProfile","updatedUser","SignupForm","signup","PrivateRoute","exact","path","children","Routes","register","ProfileForm","App","infoLoaded","setInfoLoaded","setToken","signupData","loginData","jwt","decode","getCurrentUser","Provider","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.c1f956c3.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\n\n/** Custom hook for keeping state data synced with localStorage.\n *\n * This creates `item` as state and look in localStorage for current value\n * (if not found, defaults to `firstValue`)\n *\n * When `item` changes, effect re-runs:\n * - if new state is null, removes from localStorage\n * - else, updates localStorage\n *\n * To the component, this just acts like state that is also synced to/from\n * localStorage::\n *\n *   const [myThing, setMyThing] = useLocalStorage(\"myThing\")\n */\n\nfunction useLocalStorage(key, firstValue = null) {\n  const initialValue = localStorage.getItem(key) || firstValue;\n\n  const [item, setItem] = useState(initialValue);\n\n  useEffect(function setKeyInLocalStorage() {\n    console.debug(\"hooks useLocalStorage useEffect\", \"item=\", item);\n\n    if (item === null) {\n      localStorage.removeItem(key);\n    } else {\n      localStorage.setItem(key, item);\n    }\n  }, [key, item]);\n\n  return [item, setItem];\n}\n\nexport default useLocalStorage;\n","import React from \"react\";\n\n/** Context: provides currentUser object and setter for it throughout app. */\n\nconst UserContext = React.createContext();\n\nexport default UserContext;\n","import React, { useContext } from 'react';\nimport { Link, NavLink } from 'react-router-dom';\nimport UserContext from '../auth/UserContext';\nimport './Navigation.css';\n\n/** Navigation bar for site. Shows up on every page.\n *\n * When user is logged in, shows links to main areas of site. When not,\n * shows link to Login and Signup forms.\n *\n * Rendered by App.\n */\n\nfunction Navigation({ logout }) {\n\tconst { currentUser } = useContext(UserContext);\n\tconsole.debug('Navigation', 'currentUser=', currentUser);\n\n\tfunction loggedInNav() {\n\t\treturn (\n\t\t\t<ul className=\"navbar-nav ml-auto\">\n\t\t\t\t<li className=\"nav-item mr-4\">\n\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/booksearch\">\n\t\t\t\t\t\tSearch\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item mr-4\">\n\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/bookshelf\">\n\t\t\t\t\t\tBookShelf\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item mr-4\">\n\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/profile\">\n\t\t\t\t\t\tProfile\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<Link className=\"nav-link\" to=\"/\" onClick={logout}>\n\t\t\t\t\t\tLog out {currentUser.first_name || currentUser.username}\n\t\t\t\t\t</Link>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t);\n\t}\n\n\tfunction loggedOutNav() {\n\t\treturn (\n\t\t\t<ul className=\"navbar-nav ml-auto\">\n\t\t\t\t<li className=\"nav-item mr-4\">\n\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/login\">\n\t\t\t\t\t\tLogin\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item mr-4\">\n\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/signup\">\n\t\t\t\t\t\tSign Up\n\t\t\t\t\t</NavLink>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t);\n\t}\n\n\treturn (\n\t\t<nav className=\"Navigation navbar navbar-expand-md\">\n\t\t\t<Link className=\"navbar-brand\" to=\"/\">\n\t\t\t\tBookStak\n\t\t\t</Link>\n\t\t\t{currentUser ? loggedInNav() : loggedOutNav()}\n\t\t</nav>\n\t);\n}\n\nexport default Navigation;\n","import React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport './Homepage.css';\nimport UserContext from '../auth/UserContext';\n\n/** Homepage of site.\n *\n * Shows welcome message or login/register buttons.\n *\n * Routed at /\n *\n * Routes -> Homepage\n */\n\nfunction Homepage() {\n\tconst { currentUser } = useContext(UserContext);\n\tconsole.debug('Homepage', 'currentUser=', currentUser);\n\n\treturn (\n\t\t<div className=\"Homepage\">\n\t\t\t<div className=\"container text-center\">\n\t\t\t\t<h1 className=\"mb-4 font-weight-bold\">BookStak</h1>\n\t\t\t\t<p className=\"lead\">Books: A Uniquely Portable Magic</p>\n\t\t\t\t{currentUser ? (\n\t\t\t\t\t<h2>Welcome Back, {currentUser.firstName || currentUser.username}!</h2>\n\t\t\t\t) : (\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<Link className=\"btn btn-primary font-weight-bold mr-3\" to=\"/login\">\n\t\t\t\t\t\t\tLog in\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Link className=\"btn btn-primary font-weight-bold\" to=\"/signup\">\n\t\t\t\t\t\t\tSign up\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Homepage;\n","import React from 'react';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Card, CardTitle, CardImg, CardBody, Button, Modal } from 'reactstrap';\n\nconst SearchBookCard = ({\n\tthumbnail,\n\ttitle,\n\tpageCount,\n\tlanguage,\n\tdescription,\n\tauthors,\n\tpublisher,\n\tpreviewLink,\n\tinfoLink\n}) => {\n\t// States\n\tconst [ modal, setModal ] = useState(false);\n\tconst toggle = () => setModal(!modal);\n\n\tconst history = useHistory();\n\n\tconst redirect = (e) => {\n\t\tconst book = { title, authors, description, thumbnail };\n\n\t\thistory.push({\n\t\t\tpathname: '/addsearchbook',\n\t\t\tstate: { ...book }\n\t\t});\n\t};\n\n\treturn (\n\t\t<Card style={{ width: '233px' }} className=\"m-auto \">\n\t\t\t<CardImg top style={{ width: '100%', height: '233px' }} src={thumbnail} alt={title} />\n\t\t\t<CardBody>\n\t\t\t\t<CardTitle className=\"card-title\">{title}</CardTitle>\n\t\t\t\t<Button onClick={toggle}>More info</Button>\n\t\t\t</CardBody>\n\t\t\t<Modal isOpen={modal} toggle={toggle}>\n\t\t\t\t<div className=\"modal-header d-flex justify-content-center\">\n\t\t\t\t\t<h5 className=\"modal-title text-center\" id=\"exampleModalLabel\">\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</h5>\n\t\t\t\t\t<button aria-label=\"Close\" className=\"close\" type=\"button\" onClick={toggle}>\n\t\t\t\t\t\t<span aria-hidden={true}>X</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t<div className=\"d-flex justify-content-between ml-3\">\n\t\t\t\t\t\t<img src={thumbnail} alt={title} style={{ height: '233px' }} />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p>Page Count: {pageCount ? pageCount : 'Page Count Unknown'}</p>\n\t\t\t\t\t\t\t<p>Language : {language ? language : 'Language Unknown'} </p>\n\t\t\t\t\t\t\t<p>Authors : {authors ? authors.join(', ') : 'Authors Unknown'}</p>\n\t\t\t\t\t\t\t<p>Publisher : {publisher ? publisher : 'Publisher Unknown'}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mt-3\">{description ? description : 'Description Unknown'}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t<div className=\"left-silde\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={previewLink}\n\t\t\t\t\t\t\tclassName=\"btn-link\"\n\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPreview Link\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"divider\" />\n\t\t\t\t\t<div className=\"right-silde\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={infoLink}\n\t\t\t\t\t\t\tclassName=\"btn-link\"\n\t\t\t\t\t\t\tcolor=\"default\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tInfo Link\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"divider\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button className=\"btn btn-secondary float-right\" onClick={redirect}>\n\t\t\t\t\t\t\tAdd to Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</Card>\n\t);\n};\n\nexport default SearchBookCard;\n","import React, { useState } from 'react';\nimport { InputGroup, Input, InputGroupAddon, Button, FormGroup, Label, Spinner } from 'reactstrap';\nimport Alert from 'react-bootstrap/Alert';\nimport axios from 'axios';\nimport SearchBookCard from './SearchBookCard.js';\nimport './BookShelf.css';\n\nfunction GoogleBookSearch() {\n\t// States\n\tconst [ maxResults, setMaxResults ] = useState(3);\n\tconst [ query, setQuery ] = useState('');\n\tconst [ loading, setLoading ] = useState(false);\n\tconst [ cards, setCards ] = useState([]);\n\tconst [ error, setError ] = useState(false);\n\t// Handle Search\n\tconst handleSubmit = () => {\n\t\tsetLoading(true);\n\t\tif (maxResults > 40 || maxResults < 1) {\n\t\t\tsetError(true);\n\t\t} else {\n\t\t\tgetBooks();\n\t\t}\n\t};\n\n\tasync function getBooks() {\n\t\tconst res = await axios.get(\n\t\t\t`https://www.googleapis.com/books/v1/volumes?q=${query}&maxResults=${maxResults}&startIndex=1`\n\t\t);\n\t\tif (res.data.items.length > 0) {\n\t\t\tsetCards(res.data.items);\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\tconst onKeyPress = (e) => {\n\t\tif (e.which === 13) {\n\t\t\thandleSubmit();\n\t\t}\n\t};\n\n\t// Main Show Case\n\tconst mainHeader = () => {\n\t\treturn (\n\t\t\t<div className=\"main-image d-flex justify-content-center align-items-center flex-column\">\n\t\t\t\t{/* Overlay */}\n\t\t\t\t<div className=\"filter\" />\n\t\t\t\t<h2 className=\"display-2 text-center text-white mb-3\" style={{ zIndex: 2 }}>\n\t\t\t\t\tSearch Books\n\t\t\t\t</h2>\n\t\t\t\t<div style={{ width: '60%', zIndex: 2 }}>\n\t\t\t\t\t<InputGroup size=\"lg\" className=\"mb-3\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tplaceholder=\"Book Search\"\n\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\tonChange={(e) => setQuery(e.target.value)}\n\t\t\t\t\t\t\tonKeyPress={onKeyPress}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InputGroupAddon addonType=\"append\">\n\t\t\t\t\t\t\t<Button type=\"submit\" color=\"secondary\" onSubmit={handleSubmit} onClick={handleSubmit}>\n\t\t\t\t\t\t\t\t<i className=\"fas fa-search\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</InputGroupAddon>\n\t\t\t\t\t</InputGroup>\n\t\t\t\t\t<div className=\"d-flex text-white justify-content-center\">\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Label for=\"maxResults\">Max Results</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tid=\"maxResults\"\n\t\t\t\t\t\t\t\tplaceholder=\"Max Results\"\n\t\t\t\t\t\t\t\tvalue={maxResults}\n\t\t\t\t\t\t\t\tonChange={(e) => setMaxResults(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst handleCards = () => {\n\t\tif (loading) {\n\t\t\treturn (\n\t\t\t\t<div className=\"d-flex justify-content-center mt-3\">\n\t\t\t\t\t<Spinner style={{ width: '3rem', height: '3rem' }} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\tconst items = cards.map((item, i) => {\n\t\t\t\tlet thumbnail = '';\n\t\t\t\tif (item.volumeInfo.imageLinks) {\n\t\t\t\t\tthumbnail = item.volumeInfo.imageLinks.thumbnail;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"col-lg-4 mb-3\" key={item.id}>\n\t\t\t\t\t\t<SearchBookCard\n\t\t\t\t\t\t\tthumbnail={thumbnail}\n\t\t\t\t\t\t\ttitle={item.volumeInfo.title}\n\t\t\t\t\t\t\tpageCount={item.volumeInfo.pageCount}\n\t\t\t\t\t\t\tlanguage={item.volumeInfo.language}\n\t\t\t\t\t\t\tauthors={item.volumeInfo.authors}\n\t\t\t\t\t\t\tpublisher={item.volumeInfo.publisher}\n\t\t\t\t\t\t\tdescription={item.volumeInfo.description}\n\t\t\t\t\t\t\tpreviewLink={item.volumeInfo.previewLink}\n\t\t\t\t\t\t\tinfoLink={item.volumeInfo.infoLink}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\t\t\treturn (\n\t\t\t\t<div className=\"container my-5\">\n\t\t\t\t\t<div className=\"row\">{items}</div>\n\t\t\t\t\t<div className=\"row justify-content-center text-center\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tCant find what you're looking for? Add book not found in search <a href=\"/addbook\">here</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t};\n\treturn (\n\t\t<div className=\"w-100 h-100\">\n\t\t\t{mainHeader()}\n\t\t\t{error ? <Alert type=\"danger\" messages={[ 'Results must be between 1 and 40' ]} /> : null}\n\t\t\t{handleCards()}\n\t\t</div>\n\t);\n}\n\nexport default GoogleBookSearch;\n","import React, { useState } from 'react';\nimport './SearchForm.css';\n\nfunction SearchForm({ searchFor }) {\n\tconsole.debug('SearchForm', 'searchFor=', typeof searchFor);\n\n\tconst [ searchTerm, setSearchTerm ] = useState('');\n\n\t/** Tell parent to filter */\n\tfunction handleSubmit(evt) {\n\t\t// take care of accidentally trying to search for just spaces\n\t\tevt.preventDefault();\n\t\tsearchFor(searchTerm.trim() || undefined);\n\t\tsetSearchTerm(searchTerm.trim());\n\t}\n\n\t/** Update form fields */\n\tfunction handleChange(evt) {\n\t\tsetSearchTerm(evt.target.value);\n\t}\n\n\treturn (\n\t\t<div className=\"SearchForm mb-4\">\n\t\t\t<form className=\"form-inline\" onSubmit={handleSubmit}>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"form-control form-control-lg flex-grow-1\"\n\t\t\t\t\tname=\"searchTerm\"\n\t\t\t\t\tplaceholder=\"Enter search term..\"\n\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t/>\n\t\t\t\t<button type=\"submit\" className=\"btn btn-lg btn-secondary\">\n\t\t\t\t\tSubmit\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default SearchForm;\n","import axios from 'axios';\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || 'http://localhost:3001';\n\nclass BookWormApi {\n\t// the token for interactive with the API will be stored here.\n\tstatic token;\n\n\tstatic async request(endpoint, data = {}, method = 'get') {\n\t\tconsole.debug('API Call:', endpoint, data, method);\n\n\t\tconst url = `${BASE_URL}/${endpoint}`;\n\t\tconst headers = { Authorization: `Bearer ${BookWormApi.token}` };\n\t\tconst params = method === 'get' ? data : {};\n\n\t\ttry {\n\t\t\treturn (await axios({ url, method, data, params, headers })).data;\n\t\t} catch (err) {\n\t\t\tconsole.error('API Error:', err.response);\n\t\t\tlet message = err.response.data.error.message;\n\t\t\tthrow Array.isArray(message) ? message : [ message ];\n\t\t}\n\t}\n\n\t// Individual API routes\n\n\t/** Get the current user. */\n\n\tstatic async getCurrentUser(username) {\n\t\tlet res = await this.request(`users/${username}`);\n\t\treturn res.user;\n\t}\n\n\t/** Get companies (filtered by name if not undefined) */\n\n\tstatic async getBooks(username) {\n\t\tlet res = await this.request('books', { username });\n\t\treturn res.books;\n\t}\n\n\t/** Get details on a company by handle. */\n\n\tstatic async getBook(title) {\n\t\tlet res = await this.request(`books/${title}`);\n\t\treturn res.book;\n\t}\n\n\tstatic async getFilteredBooks(category) {\n\t\tlet res = await this.request(`books/${category}`);\n\t\treturn res.books;\n\t}\n\n\t/** Get token for login from username, password. */\n\n\tstatic async login(data) {\n\t\tlet res = await this.request(`auth/token`, data, 'post');\n\t\treturn res.token;\n\t}\n\n\t/** Signup for site. */\n\n\tstatic async signup(data) {\n\t\tlet res = await this.request(`auth/register`, data, 'post');\n\t\treturn res.token;\n\t}\n\n\t/** Save user profile page. */\n\n\tstatic async saveProfile(username, data) {\n\t\tlet res = await this.request(`users/${username}`, data, 'patch');\n\t\treturn res.user;\n\t}\n\n\t// static async saveBook()\n\tstatic async saveBook(data) {\n\t\tlet res = await this.request(`books`, data, 'post');\n\t\treturn res.book;\n\t}\n\n\t// static async saveBook()\n\tstatic async saveBookEdit(data, id) {\n\t\tlet res = await this.request(`books/${id}`, data, 'patch');\n\t\treturn res.book;\n\t}\n\n\tstatic async deleteBook(data) {\n\t\tlet res = await this.request(`books/${data.id}`, data, 'delete');\n\t\treturn res.book;\n\t}\n}\n\nexport default BookWormApi;\n","import React from 'react';\r\nimport { useState, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Card, CardTitle, CardImg, CardBody, Button, Modal } from 'reactstrap';\r\nimport UserContext from '../auth/UserContext';\r\nimport BookWormApi from '../api/api';\r\nimport './BookCard.css';\r\n\r\nconst UserBookCard = ({ thumbnail, title, description, authors, personalreview, category, id }) => {\r\n\t// States\r\n\tconst [ modal, setModal ] = useState(false);\r\n\tconst toggle = () => setModal(!modal);\r\n\tconst { currentUser } = useContext(UserContext);\r\n\tconst history = useHistory();\r\n\r\n\t// const [targetBook, settargetBook] = useState({title, authors, description, thumbnail});\r\n\t// const book = (`{\r\n\t//   ${id}, ${title}, ${authors}, ${description}, ${thumbnail}\r\n\t// }`)\r\n\r\n\tconst log = () => console.log(id, title, authors);\r\n\r\n\t// async function deleteBook() {\r\n\t//   await BookWormApi.remove(id);\r\n\t//   history.push(\"/books\");\r\n\t// }\r\n\t// const { currentUser } = useContext(UserContext);\r\n\r\n\tasync function handleDelete(evt) {\r\n\t\tevt.preventDefault();\r\n\r\n\t\tlet bookData = {\r\n\t\t\tid: `${id}`,\r\n\t\t\ttitle: `${title}`,\r\n\t\t\tauthors: `${authors}`,\r\n\t\t\tdescription: `${description}`,\r\n\t\t\tpersonalreview: `${personalreview}`,\r\n\t\t\tcategory: `${category}`,\r\n\t\t\tthumbnail: `${thumbnail}`,\r\n\t\t\tusername: currentUser.username\r\n\t\t};\r\n\t\t// console.log(bookData);\r\n\t\t// let username = formData.username;\r\n\t\t// let addBook;\r\n\r\n\t\ttry {\r\n\t\t\tawait BookWormApi.deleteBook(bookData);\r\n\t\t} catch (errors) {\r\n\t\t\tconsole.log('unable to delete book');\r\n\t\t\tconsole.log(bookData);\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tasync function redirectToEdit(e) {\r\n\t\tconst book = { id, title, authors, description, personalreview, category, thumbnail };\r\n\t\thistory.push({\r\n\t\t\tpathname: '/editbook',\r\n\t\t\tstate: { ...book }\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Card style={{ width: '233px' }} className=\"m-auto \">\r\n\t\t\t<CardImg top style={{ width: '100%', height: '233px' }} src={thumbnail} alt={title} />\r\n\t\t\t<CardBody>\r\n\t\t\t\t<CardTitle className=\"card-title\">{title}</CardTitle>\r\n\t\t\t\t<Button onClick={toggle}>More info</Button>\r\n\t\t\t</CardBody>\r\n\t\t\t<Modal isOpen={modal} toggle={toggle}>\r\n\t\t\t\t<div className=\"modal-header d-flex justify-content-center\">\r\n\t\t\t\t\t<h5 className=\"modal-title text-center\" id=\"exampleModalLabel\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<button aria-label=\"Close\" className=\"close\" type=\"button\" onClick={toggle}>\r\n\t\t\t\t\t\t<span aria-hidden={true}>X</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t<div className=\"d-flex justify-content-between ml-3\">\r\n\t\t\t\t\t\t<img src={thumbnail} alt={title} style={{ height: '233px' }} />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p>Authors : {authors ? authors.replace(/,/g, ', ') : 'Authors Unknown'}</p>\r\n\t\t\t\t\t\t\t<p>Category : {category ? category : 'To Be Categorized'}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mt-3\">\r\n\t\t\t\t\t\t<p>Publisher's Description: {description ? description : 'No Description'}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mt-3\">\r\n\t\t\t\t\t\t<p>Persional Review: {personalreview ? personalreview : 'None'}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t<div className=\"divider\" />\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{/* <a href='/addbook' color='secondary' onClick={log} >Add to Bookshelf\r\n              </a> */}\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary float-right\" onClick={redirectToEdit}>\r\n\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary float-right\" onClick={handleDelete}>\r\n\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary float-right\" onClick={log}>\r\n\t\t\t\t\t\t\tLog\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default UserBookCard;\r\n","import React from \"react\";\nimport \"./LoadingSpinner.css\";\n\n/** Loading message used by components that fetch API data. */\n\nfunction LoadingSpinner() {\n  return (\n      <div className=\"LoadingSpinner\">\n        Loading ...\n      </div>\n  );\n}\n\nexport default LoadingSpinner;","import React, { useState, useEffect } from 'react';\r\nimport SearchForm from '../common/SearchForm';\r\nimport BookWormApi from '../api/api';\r\nimport BookShelfCard from './BookShelfCard';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\nimport './BookShelf.css';\r\n\r\nfunction BookShelf() {\r\n\tconsole.debug('BookShelf');\r\n\tconst [ books, setBooks ] = useState(null);\r\n\r\n\tuseEffect(function getBooksOnMount() {\r\n\t\tconsole.debug('BookShelf useEffect getBooksOnMount');\r\n\t\tsearch();\r\n\t}, []);\r\n\r\n\tasync function search(username) {\r\n\t\tlet books = await BookWormApi.getBooks(username);\r\n\t\tsetBooks(books);\r\n\t}\r\n\r\n\t/** Triggered by search form submit; reloads books of only that category */\r\n\tasync function getCategorizedBooks(category) {\r\n\t\tlet books = await BookWormApi.getFilteredBooks(category);\r\n\t\tsetBooks(books);\r\n\t}\r\n\r\n\tif (!books) return <LoadingSpinner />;\r\n\r\n\treturn (\r\n\t\t<div className=\"CompanyList col-md-8 offset-md-2\">\r\n\t\t\t<SearchForm searchFor={getCategorizedBooks} />\r\n\r\n\t\t\t{books.length ? (\r\n\t\t\t\t<div className=\"container my-5\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t{books.map((b) => (\r\n\t\t\t\t\t\t\t<div className=\"col-lg-4 mb-3\" key={b.id}>\r\n\t\t\t\t\t\t\t\t<BookShelfCard\r\n\t\t\t\t\t\t\t\t\tid={b.id}\r\n\t\t\t\t\t\t\t\t\ttitle={b.title}\r\n\t\t\t\t\t\t\t\t\tauthors={b.authors}\r\n\t\t\t\t\t\t\t\t\tdescription={b.description}\r\n\t\t\t\t\t\t\t\t\tpersonalreview={b.personalreview}\r\n\t\t\t\t\t\t\t\t\tcategory={b.category}\r\n\t\t\t\t\t\t\t\t\tthumbnail={b.thumbnail}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<p className=\"lead\">Sorry, no results were found!</p>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BookShelf;\r\n","import React from 'react';\n\nfunction Alert({ type = 'danger', messages = [] }) {\n\tconsole.debug('Alert', 'type=', type, 'messages=', messages);\n\n\treturn (\n\t\t<div className={`alert alert-${type}`} role=\"alert\">\n\t\t\t{messages.map((error) => (\n\t\t\t\t<p className=\"mb-0 small\" key={error}>\n\t\t\t\t\t{error}\n\t\t\t\t</p>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default Alert;\n","import React, { useState, useContext } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport BookWormApi from '../api/api';\nimport UserContext from '../auth/UserContext';\nimport Alert from '../common/Alert';\n\nfunction AddSearchedBook() {\n\tconst history = useHistory();\n\tconst location = useLocation();\n\tconst { currentUser } = useContext(UserContext);\n\tconst { title, authors, description, thumbnail } = location.state;\n\tconst [ formData, setFormData ] = useState({\n\t\ttitle: `${title}`,\n\t\tauthors: `${authors}`,\n\t\tdescription: `${description}`,\n\t\tpersonalreview: '',\n\t\tcategory: '',\n\t\tthumbnail: `${thumbnail}`\n\t});\n\tconst [ formErrors, setFormErrors ] = useState([]);\n\n\tasync function handleSubmit(evt) {\n\t\tevt.preventDefault();\n\n\t\tlet bookData = {\n\t\t\ttitle: formData.title,\n\t\t\tauthors: formData.authors,\n\t\t\tdescription: formData.description,\n\t\t\tpersonalreview: formData.personalreview,\n\t\t\tcategory: formData.category,\n\t\t\tthumbnail: formData.thumbnail,\n\t\t\tusername: currentUser.username\n\t\t};\n\n\t\ttry {\n\t\t\tawait BookWormApi.saveBook(bookData);\n\t\t\thistory.push('/books');\n\t\t} catch (errors) {\n\t\t\tsetFormErrors(errors);\n\t\t\treturn;\n\t\t}\n\n\t\tsetFormData((f) => ({\n\t\t\ttitle: '',\n\t\t\tauthors: '',\n\t\t\tdescription: '',\n\t\t\tpersonalreview: '',\n\t\t\tcategroy: '',\n\t\t\tthumbnail: ''\n\t\t}));\n\t\tsetFormErrors([]);\n\t}\n\n\t/** Handle form data changing */\n\tfunction handleChange(evt) {\n\t\tconst { name, value } = evt.target;\n\t\tsetFormData((f) => ({\n\t\t\t...f,\n\t\t\t[name]: value\n\t\t}));\n\t\tsetFormErrors([]);\n\t}\n\n\tfunction cancel() {\n\t\thistory.push('/booksearch');\n\t}\n\n\treturn (\n\t\t<div className=\"col-md-6 col-lg-4 offset-md-3 offset-lg-4\">\n\t\t\t<h3>Book</h3>\n\t\t\t<div className=\"card\">\n\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Title</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.title}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Authors</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"authors\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.authors}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Description</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.description}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Personal Review</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"personalreview\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.personalreview}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Category</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"category\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.category}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Cover</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"thumbnail\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.thumbnail}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{formErrors.length ? <Alert type=\"danger\" messages={formErrors} /> : null}\n\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={handleSubmit}>\n\t\t\t\t\t\t\tAdd Book\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={cancel}>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default AddSearchedBook;\n","import React, { useState, useContext } from 'react';\r\nimport BookWormApi from '../api/api';\r\nimport UserContext from '../auth/UserContext';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Alert from '../common/Alert';\r\n\r\nfunction AddUnavailableBook() {\r\n\tconst defaultThumbnail =\r\n\t\t'https://images.unsplash.com/photo-1575709527142-a93ed587bb83?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=700&q=80';\r\n\tconst { currentUser } = useContext(UserContext);\r\n\tconst [ formData, setFormData ] = useState({\r\n\t\ttitle: '',\r\n\t\tauthors: '',\r\n\t\tdescription: '',\r\n\t\tpersonalreview: '',\r\n\t\tcategroy: '',\r\n\t\tthumnnail: ''\r\n\t});\r\n\tconst [ formErrors, setFormErrors ] = useState([]);\r\n\tconst history = useHistory();\r\n\r\n\tconsole.debug('formData=', formData, 'formErrors=', formErrors);\r\n\r\n\tasync function handleSubmit(evt) {\r\n\t\tevt.preventDefault();\r\n\r\n\t\tlet bookData = {\r\n\t\t\ttitle: formData.title,\r\n\t\t\tauthors: formData.authors,\r\n\t\t\tdescription: formData.description,\r\n\t\t\tpersonalreview: formData.personalreview,\r\n\t\t\tcategory: formData.category,\r\n\t\t\tthumbnail: formData.thumbnail ? formData.thumnnail : defaultThumbnail,\r\n\t\t\tusername: currentUser.username\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tawait BookWormApi.saveBook(bookData);\r\n\t\t\thistory.push('/booksearch');\r\n\t\t} catch (errors) {\r\n\t\t\tsetFormErrors(errors);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetFormData((f) => ({\r\n\t\t\ttitle: '',\r\n\t\t\tauthors: '',\r\n\t\t\tdescription: '',\r\n\t\t\tpersonalreview: '',\r\n\t\t\tcategroy: '',\r\n\t\t\tthumnnail: ''\r\n\t\t}));\r\n\t\tsetFormErrors([]);\r\n\t}\r\n\r\n\t/** Handle form data changing */\r\n\tfunction handleChange(evt) {\r\n\t\tconst { name, value } = evt.target;\r\n\t\tsetFormData((f) => ({\r\n\t\t\t...f,\r\n\t\t\t[name]: value\r\n\t\t}));\r\n\t\tsetFormErrors([]);\r\n\t}\r\n\r\n\tfunction cancel() {\r\n\t\thistory.push('/books');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"col-md-6 col-lg-4 offset-md-3 offset-lg-4\">\r\n\t\t\t<h3>Book</h3>\r\n\t\t\t<div className=\"card\">\r\n\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Title</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.title}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Authors</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"authors\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.authors}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Description</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.description}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Personal Review</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"personalreview\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.personalreview}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Category</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"category\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.category}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Cover</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"thumbnail\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.thumbnail}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<p>To get a photo URL, right click on a picture and select \"copy image address\"</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{formErrors.length ? <Alert type=\"danger\" messages={formErrors} /> : null}\r\n\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={handleSubmit}>\r\n\t\t\t\t\t\t\tAdd Book\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={cancel}>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default AddUnavailableBook;\r\n","import React, { useState, useContext } from 'react';\r\nimport BookWormApi from '../api/api';\r\nimport UserContext from '../auth/UserContext';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport Alert from '../common/Alert';\r\n\r\nfunction EditBookForm() {\r\n\tconst { currentUser } = useContext(UserContext);\r\n\tconst history = useHistory();\r\n\tconst location = useLocation();\r\n\tconst { title, authors, description, thumbnail, personalreview, category, id } = location.state;\r\n\tconst [ formData, setFormData ] = useState({\r\n\t\ttitle: `${title}`,\r\n\t\tauthors: `${authors}`,\r\n\t\tdescription: `${description}`,\r\n\t\tpersonalreview: `${personalreview}`,\r\n\t\tcategory: `${category}`,\r\n\t\tthumbnail: `${thumbnail}`\r\n\t});\r\n\tconst [ formErrors, setFormErrors ] = useState([]);\r\n\r\n\tconsole.debug('formData=', formData, 'formErrors=', formErrors);\r\n\r\n\tasync function handleSubmit(evt) {\r\n\t\tevt.preventDefault();\r\n\r\n\t\tlet data = {\r\n\t\t\ttitle: formData.title,\r\n\t\t\tauthors: formData.authors,\r\n\t\t\tdescription: formData.description,\r\n\t\t\tpersonalreview: formData.personalreview,\r\n\t\t\tcategory: formData.category,\r\n\t\t\tthumbnail: formData.thumbnail,\r\n\t\t\tusername: currentUser.username\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tawait BookWormApi.saveBookEdit(data, id);\r\n\t\t\thistory.push(`/books`);\r\n\t\t} catch (errors) {\r\n\t\t\tdebugger;\r\n\t\t\tsetFormErrors(errors);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetFormData((f) => ({\r\n\t\t\ttitle: '',\r\n\t\t\tauthors: '',\r\n\t\t\tdescription: '',\r\n\t\t\tpersonalreview: '',\r\n\t\t\tcategroy: '',\r\n\t\t\tthumnnail: ''\r\n\t\t}));\r\n\t\tsetFormErrors([]);\r\n\t}\r\n\r\n\t/** Handle form data changing */\r\n\tfunction handleChange(evt) {\r\n\t\tconst { name, value } = evt.target;\r\n\t\tsetFormData((f) => ({\r\n\t\t\t...f,\r\n\t\t\t[name]: value\r\n\t\t}));\r\n\t\tsetFormErrors([]);\r\n\t}\r\n\r\n\tfunction cancel() {\r\n\t\thistory.push('/bookshelf');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"col-md-6 col-lg-4 offset-md-3 offset-lg-4\">\r\n\t\t\t<h3>Book</h3>\r\n\t\t\t<div className=\"card\">\r\n\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Title</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.title}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Authors</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"authors\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.authors}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Description</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.description}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Personal Review</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"personalreview\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.personalreview}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Category</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"category\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.category}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label>Cover</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname=\"thumbnail\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tvalue={formData.thumbnail}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{formErrors.length ? <Alert type=\"danger\" messages={formErrors} /> : null}\r\n\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={handleSubmit}>\r\n\t\t\t\t\t\t\tEdit Book\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={cancel}>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default EditBookForm;\r\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Alert from '../common/Alert';\n\n/** Login form.\n *\n * Shows form and manages update to state on changes.\n * On submission:\n * - calls login function prop\n * - redirects to /bookshelf route\n *\n * Routes -> LoginForm -> Alert\n * Routed as /login\n */\n\nfunction LoginForm({ login }) {\n\tconst history = useHistory();\n\tconst [ formData, setFormData ] = useState({\n\t\tusername: '',\n\t\tpassword: ''\n\t});\n\tconst [ formErrors, setFormErrors ] = useState([]);\n\n\tconsole.debug('LoginForm', 'login=', typeof login, 'formData=', formData, 'formErrors', formErrors);\n\n\t/** Handle form submit:\n   *\n   * Calls login func prop and, if successful, redirect to /bookshelf\n   */\n\n\tasync function handleSubmit(evt) {\n\t\tevt.preventDefault();\n\t\tlet result = await login(formData);\n\t\tif (result.success) {\n\t\t\thistory.push('/bookshelf');\n\t\t} else {\n\t\t\tsetFormErrors(result.errors);\n\t\t}\n\t}\n\n\t/** Update form data field */\n\tfunction handleChange(evt) {\n\t\tconst { name, value } = evt.target;\n\t\tsetFormData((l) => ({ ...l, [name]: value }));\n\t}\n\n\treturn (\n\t\t<div className=\"LoginForm\">\n\t\t\t<div className=\"container col-md-6 offset-md-3 col-lg-4 offset-lg-4\">\n\t\t\t\t<h3 className=\"mb-3\">Log In</h3>\n\n\t\t\t\t<div className=\"card\">\n\t\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Username</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tvalue={formData.username}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tautoComplete=\"username\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tvalue={formData.password}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{formErrors.length ? <Alert type=\"danger\" messages={formErrors} /> : null}\n\n\t\t\t\t\t\t\t<button className=\"btn btn-secondary float-right\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default LoginForm;\n","import React, { useState, useContext } from 'react';\nimport UserContext from '../auth/UserContext';\nimport { useHistory } from 'react-router-dom';\nimport Alert from 'react-bootstrap/Alert';\nimport BookWormApi from '../api/api';\n\nfunction Profile() {\n\tconst history = useHistory();\n\tconst { currentUser, setCurrentUser } = useContext(UserContext);\n\tconst [ formData, setFormData ] = useState({\n\t\tfirstname: currentUser.firstname,\n\t\tlastname: currentUser.lastname,\n\t\temail: currentUser.email,\n\t\tusername: currentUser.username,\n\t\tpassword: ''\n\t});\n\tconst [ formErrors, setFormErrors ] = useState([]);\n\tconst [ saveConfirmed, setSaveConfirmed ] = useState(false);\n\n\tconsole.debug(\n\t\t'ProfileForm',\n\t\t'currentUser=',\n\t\tcurrentUser,\n\t\t'formData=',\n\t\tformData,\n\t\t'formErrors=',\n\t\tformErrors,\n\t\t'saveConfirmed=',\n\t\tsaveConfirmed\n\t);\n\n\t/** on form submit:\n\t * - attempt save to backend & report any errors\n\t * - if successful\n\t *   - clear previous error messages and password\n\t *   - show save-confirmed message\n\t *   - set current user info throughout the site\n\t */\n\n\tasync function handleSubmit(evt) {\n\t\tevt.preventDefault();\n\n\t\tlet profileData = {\n\t\t\tfirstname: formData.firstname,\n\t\t\tlastname: formData.lastname,\n\t\t\temail: formData.email,\n\t\t\tpassword: formData.password\n\t\t};\n\n\t\tlet username = formData.username;\n\t\tlet updatedUser;\n\n\t\ttry {\n\t\t\tupdatedUser = await BookWormApi.saveProfile(username, profileData);\n\t\t} catch (errors) {\n\t\t\tsetFormErrors(errors);\n\t\t\treturn;\n\t\t}\n\n\t\tsetFormData((f) => ({ ...f, password: '' }));\n\t\tsetFormErrors([]);\n\t\tsetSaveConfirmed(true);\n\n\t\t// trigger reloading of user information throughout the site\n\t\tsetCurrentUser(updatedUser);\n\t\thistory.push('/books');\n\t}\n\n\t/** Handle form data changing */\n\tfunction handleChange(evt) {\n\t\tconst { name, value } = evt.target;\n\t\tsetFormData((f) => ({\n\t\t\t...f,\n\t\t\t[name]: value\n\t\t}));\n\t\tsetFormErrors([]);\n\t}\n\n\tfunction cancel() {\n\t\thistory.push('/bookshelf');\n\t}\n\n\treturn (\n\t\t<div className=\"col-md-6 col-lg-4 offset-md-3 offset-lg-4\">\n\t\t\t<h3>Profile</h3>\n\t\t\t<div className=\"card\">\n\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Username</label>\n\t\t\t\t\t\t\t<p className=\"form-control-plaintext\">{formData.username}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>First Name</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"firstname\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.firstname}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Last Name</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"lastname\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.lastname}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Email</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.email}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Confirm password to make changes:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tvalue={formData.password}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{formErrors.length ? <Alert type=\"danger\" messages={formErrors} /> : null}\n\n\t\t\t\t\t\t{saveConfirmed ? <Alert type=\"success\" messages={[ 'Updated successfully.' ]} /> : null}\n\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={handleSubmit}>\n\t\t\t\t\t\t\tSave Changes\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button className=\"btn btn-secondary btn-block mt-4\" onClick={cancel}>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Profile;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Alert from '../common/Alert';\n\n/** Signup form.\n *\n * Shows form and manages update to state on changes.\n * On submission:\n * - calls signup function prop\n * - redirects to /bookshelf route\n *\n * Routes -> SignupForm -> Alert\n * Routed as /signup\n */\n\nfunction SignupForm({ signup }) {\n\tconst history = useHistory();\n\tconst [ formData, setFormData ] = useState({\n\t\tusername: '',\n\t\tpassword: '',\n\t\tfirstname: '',\n\t\tlastname: '',\n\t\temail: ''\n\t});\n\tconst [ formErrors, setFormErrors ] = useState([]);\n\n\tconsole.debug('SignupForm', 'signup=', typeof signup, 'formData=', formData, 'formErrors=', formErrors);\n\n\t/** Handle form submit:\n   *\n   * Calls login func prop and, if successful, redirect to /bookshelf.\n   */\n\n\tasync function handleSubmit(evt) {\n\t\tevt.preventDefault();\n\t\tlet result = await signup(formData);\n\t\tif (result.success) {\n\t\t\thistory.push('/bookshelf');\n\t\t} else {\n\t\t\tsetFormErrors(result.errors);\n\t\t}\n\t}\n\n\t/** Update form data field */\n\tfunction handleChange(evt) {\n\t\tconst { name, value } = evt.target;\n\t\tsetFormData((data) => ({ ...data, [name]: value }));\n\t}\n\n\treturn (\n\t\t<div className=\"SignupForm\">\n\t\t\t<div className=\"container col-md-6 offset-md-3 col-lg-4 offset-lg-4\">\n\t\t\t\t<h2 className=\"mb-3\">Sign Up</h2>\n\t\t\t\t<div className=\"card\">\n\t\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Username</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tvalue={formData.username}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tvalue={formData.password}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>First Name</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname=\"firstname\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tvalue={formData.firstname}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Last Name</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname=\"lastname\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tvalue={formData.lastname}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<label>Email</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\tvalue={formData.email}\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{formErrors.length ? <Alert type=\"danger\" messages={formErrors} /> : null}\n\n\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary float-right\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SignupForm;\n","import React, { useContext } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport UserContext from \"../auth/UserContext\";\n\n/** \"Higher-Order Component\" for private routes.\n *\n * In routing component, use these instead of <Route ...>. This component\n * will check if there is a valid current user and only continues to the\n * route if so. If no user is present, redirects to login form.\n */\n\nfunction PrivateRoute({ exact, path, children }) {\n  const { currentUser } = useContext(UserContext);\n\n  console.debug(\n      \"PrivateRoute\",\n      \"exact=\", exact,\n      \"path=\", path,\n      \"currentUser=\", currentUser,\n  );\n\n  if (!currentUser) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n      <Route exact={exact} path={path}>\n        {children}\n      </Route>\n  );\n}\n\nexport default PrivateRoute;\n","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Homepage from '../homepage/Homepage';\nimport GoogleBookSearch from '../books/GoogleBooksSearch';\nimport BookShelf from '../books/BookShelf';\nimport AddSearchedBook from '../books/AddSearchedBook';\nimport AddUnavailableBook from '../books/AddUnavailableBook';\nimport EditBookForm from '../books/EditBookForm';\nimport LoginForm from '../auth/LoginForm';\nimport ProfileForm from '../profiles/ProfileForm';\nimport SignupForm from '../auth/SignupForm';\nimport PrivateRoute from './PrivateRoute';\n\n/** Site-wide routes.\n *\n * Parts of site should only be visitable when logged in. Those routes are\n * wrapped by <PrivateRoute>, which is an authorization component.\n *\n * Visiting a non-existant route redirects to the homepage.\n */\n\nfunction Routes({ login, signup }) {\n\tconsole.debug('Routes', `login=${typeof login}`, `register=${typeof register}`);\n\treturn (\n\t\t<div className=\"pt-5\">\n\t\t\t<Switch>\n\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t<Homepage />\n\t\t\t\t</Route>\n\n\t\t\t\t<Route exact path=\"/login\">\n\t\t\t\t\t<LoginForm login={login} />\n\t\t\t\t</Route>\n\n\t\t\t\t<Route exact path=\"/signup\">\n\t\t\t\t\t<SignupForm signup={signup} />\n\t\t\t\t</Route>\n\n\t\t\t\t<PrivateRoute exact path=\"/booksearch\">\n\t\t\t\t\t<GoogleBookSearch />\n\t\t\t\t</PrivateRoute>\n\n\t\t\t\t<PrivateRoute exact path=\"/bookshelf\">\n\t\t\t\t\t<BookShelf />\n\t\t\t\t</PrivateRoute>\n\n\t\t\t\t<PrivateRoute exact path=\"/addbook\">\n\t\t\t\t\t<AddUnavailableBook />\n\t\t\t\t</PrivateRoute>\n\n\t\t\t\t<PrivateRoute exact path=\"/addsearchbook\">\n\t\t\t\t\t<AddSearchedBook />\n\t\t\t\t</PrivateRoute>\n\n\t\t\t\t<PrivateRoute exact path=\"/editbook\">\n\t\t\t\t\t<EditBookForm />\n\t\t\t\t</PrivateRoute>\n\n\t\t\t\t<PrivateRoute path=\"/profile\">\n\t\t\t\t\t<ProfileForm />\n\t\t\t\t</PrivateRoute>\n\n\t\t\t\t<Redirect to=\"/\" />\n\t\t\t</Switch>\n\t\t</div>\n\t);\n}\n\nexport default Routes;\n","import React, { useState, useEffect } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport useLocalStorage from './hooks/useLocalStorage';\nimport Navigation from './routes-nav/Navigation';\nimport Routes from './routes-nav/Routes';\nimport LoadingSpinner from './common/LoadingSpinner';\nimport BookWormApi from './api/api';\nimport UserContext from './auth/UserContext';\nimport jwt from 'jsonwebtoken';\n\n// Key name for storing token in localStorage for \"remember me\" re-login\nexport const TOKEN_STORAGE_ID = 'bookworm-token';\n\n/** BookWorm application.\n *\n * - infoLoaded: has user data been pulled from API?\n *   (this manages spinner for \"loading...\")\n *\n * - currentUser: user obj from API. This becomes the canonical way to tell\n *   if someone is logged in. This is passed around via context throughout app.\n *\n * - token: for logged in users, this is their authentication JWT.\n *   Is required to be set for most API calls. This is initially read from\n *   localStorage and synced to there via the useLocalStorage hook.\n *\n * App -> Routes\n */\n\nfunction App() {\n\tconst [ infoLoaded, setInfoLoaded ] = useState(false);\n\t// const [applicationIds, setApplicationIds] = useState(new Set([]));\n\tconst [ currentUser, setCurrentUser ] = useState(null);\n\tconst [ token, setToken ] = useLocalStorage(TOKEN_STORAGE_ID);\n\n\tconsole.debug('App', 'infoLoaded=', infoLoaded, 'currentUser=', currentUser, 'token=', token);\n\n\t// Load user info from API. Until a user is logged in and they have a token,\n\t// this should not run. It only needs to re-run when a user logs out, so\n\t// the value of the token is a dependency for this effect.\n\n\tuseEffect(\n\t\tfunction loadUserInfo() {\n\t\t\tconsole.debug('App useEffect loadUserInfo', 'token=', token);\n\n\t\t\tasync function getCurrentUser() {\n\t\t\t\tif (token) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet { username } = jwt.decode(token);\n\t\t\t\t\t\t// put the token on the Api class so it can use it to call the API.\n\t\t\t\t\t\tBookWormApi.token = token;\n\t\t\t\t\t\tlet currentUser = await BookWormApi.getCurrentUser(username);\n\t\t\t\t\t\tsetCurrentUser(currentUser);\n\t\t\t\t\t\t// setApplicationIds(new Set(currentUser.applications));\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.error('App loadUserInfo: problem loading', err);\n\t\t\t\t\t\tsetCurrentUser(null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsetInfoLoaded(true);\n\t\t\t}\n\n\t\t\t// set infoLoaded to false while async getCurrentUser runs; once the\n\t\t\t// data is fetched (or even if an error happens!), this will be set back\n\t\t\t// to false to control the spinner.\n\t\t\tsetInfoLoaded(false);\n\t\t\tgetCurrentUser();\n\t\t},\n\t\t[ token ]\n\t);\n\n\t/** Handles site-wide logout. */\n\tfunction logout() {\n\t\tsetCurrentUser(null);\n\t\tsetToken(null);\n\t}\n\n\t/** Handles site-wide signup.\n   *\n   * Automatically logs them in (set token) upon signup.\n   *\n   * Make sure you await this function and check its return value!\n   */\n\tasync function signup(signupData) {\n\t\ttry {\n\t\t\tlet token = await BookWormApi.signup(signupData);\n\t\t\tsetToken(token);\n\t\t\treturn { success: true };\n\t\t} catch (errors) {\n\t\t\tconsole.error('signup failed', errors);\n\t\t\treturn { success: false, errors };\n\t\t}\n\t}\n\n\t/** Handles site-wide login.\n   *\n   * Make sure you await this function and check its return value!\n   */\n\tasync function login(loginData) {\n\t\ttry {\n\t\t\tlet token = await BookWormApi.login(loginData);\n\t\t\tsetToken(token);\n\t\t\treturn { success: true };\n\t\t} catch (errors) {\n\t\t\tconsole.error('login failed', errors);\n\t\t\treturn { success: false, errors };\n\t\t}\n\t}\n\n\tif (!infoLoaded) return <LoadingSpinner />;\n\n\treturn (\n\t\t<BrowserRouter>\n\t\t\t<UserContext.Provider value={{ currentUser, setCurrentUser }}>\n\t\t\t\t<div className=\"App\">\n\t\t\t\t\t<Navigation logout={logout} />\n\t\t\t\t\t<Routes login={login} signup={signup} />\n\t\t\t\t</div>\n\t\t\t</UserContext.Provider>\n\t\t</BrowserRouter>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n              \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === \"installed\") {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                    \"New content is available and will be used when all \" +\n                    \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n                );\n\n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log(\"Content is cached for offline use.\");\n\n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error(\"Error during service worker registration:\", error);\n      });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n      .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get(\"content-type\");\n        if (\n            response.status === 404 ||\n            (contentType != null && contentType.indexOf(\"javascript\") === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log(\n            \"No internet connection found. App is running in offline mode.\",\n        );\n      });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n        .then(registration => {\n          registration.unregister();\n        })\n        .catch(error => {\n          console.error(error.message);\n        });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t<Router>\n\t\t<App />\n\t</Router>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}